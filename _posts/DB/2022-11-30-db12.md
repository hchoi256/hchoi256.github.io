---
layout: single
title: "DBMS: Query Optimization"
categories: DB
tag: [Database, Query Optimization]
toc: true
toc_sticky: true
toc_label: "쭌스log"
#author_profile: false
header:
    teaser: /assets/images/posts/db.png
sidebar:
    nav: "docs"
---

# INTRO 🙌
저번 시간에는 Evaluation of Relational Operations: Other Techniques 에 대하여 알아보았다.

이번 시간에는 **Query Optimization**에 대해 알아보자.

****
# Query Optimization 직관
![image](https://user-images.githubusercontent.com/39285147/204927988-6ad23c14-e6be-46d5-aac3-9365d114c818.png)

**Plan**: RA Tree에서 각 op마다 알맞은 알고리즘 적용 계획
- Each operator typically implemented using a `pull` interface
    - 1. OP `pulled` for the next output $\rarr$ `pulls` on its inputs
    - 2. Compute them.

Two main issues in query optimization:
- For a given query, **what plans are considered**?
    - Algorithm to search plan space for cheapest (estimated) plan.
- How is the **cost of a plan estimated**?

**Ideally**: Want to find best plan. **Practically**: Avoid worst plans!

We will study the System R approach.

## Logical v. Physical Plan
        SELECT  S.sname
        FROM  Reserves R, Sailors S
        WHERE  R.sid=S.sid AND 
            R.bid=100 AND S.rating>5

### Logical Plan (= RA Tree)
![image](https://user-images.githubusercontent.com/39285147/204926482-c442a614-4ba9-4487-8da1-b2fa1be680f5.png)

### Physical Plan (= Plan)
- can be multiple solutions; each can have a different run time

![image](https://user-images.githubusercontent.com/39285147/204926523-d32f5076-c771-4fd4-9db4-213cf8ce1892.png)


1. generate all possible physical plans
2. estimate the run time of them
3. pick the fastest one

****
# Reference 
[Database Management Systems by Raghu Ramakrishnan and Johannes Gehrke](https://pages.cs.wisc.edu/~dbbook/)

[Relational Operators](https://www.javatpoint.com/dbms-relational-algebra)