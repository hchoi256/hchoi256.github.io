---
layout: single
title: "DBMS: Normalization"
categories: DB
tag: [Database, Normalization]
toc: true
toc_sticky: true
toc_label: "ì­ŒìŠ¤log"
#author_profile: false
header:
    teaser: /assets/images/posts/db.png
sidebar:
    nav: "docs"
---

# INTRO ğŸ™Œ
ì €ë²ˆ ì‹œê°„ì—ëŠ” Transaction Management ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ë‹¤.

ì´ë²ˆ ì‹œê°„ì—ëŠ” **Normalization**ì— ëŒ€í•´ ì•Œì•„ë³´ì.

****
# ë°°ê²½ì§€ì‹ ğŸ”
## DB Design 
### Bad Design
[*Bad Design*]

![image](https://user-images.githubusercontent.com/39285147/207590632-2bdbe8c0-5410-43c0-a22b-d044e0d7e6dc.png)

- Relation may not be well-designed, thus causing us a lot of problems
- Problems(= **Anomalies**):
    - Redundancy              
        - repetition of data      
    - update anomalies
        - update one item and forget others 
        - inconsistencies
    - deletion anomalies    
        - delete many items 
        - delete one item, loose other information
    - insertion anomalies  
        - can't insert one item without inserting others

## Good Design
[*Better Design*: Break the relation into two]

![image](https://user-images.githubusercontent.com/39285147/207591071-9bde3a40-bf3a-461a-a245-aeeaee60755f.png)

- Original db schema R ì‚¬ìš©
- Good design R* ì–»ì„ ë•Œê¹Œì§€ ë°˜ë³µ
- R* ì´ìƒì ì¸ ì¡°ê±´
    - R ì •ë³´ í¬í•¨
    - Redundancy â†“
    - Dependency-preserving; R $$\leftrightarrow$$ constraints `C` $$\rightarrow$$ `C` $$\leftrightarrow$$ R*
    - Good query performance

ê·¸ë ‡ë‹¤ë©´, ì–´ë–»ê²Œ ì¢‹ì€ R* ì°¾ì•„ë‚¼ ìˆ˜ ìˆì„ê¹Œ?

ìƒê¸° ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì ê³ ì•ˆëœ ê²ƒì´ ë°”ë¡œ **normal forms**ì´ë‹¤.

****
# Normal Forms ğŸš
- DB gurus:
    - Normal forms (Boyce-Codd, 3rd, and 4th normal forms)
        - Based on various constraints
            - [Functional dependencies and keys](#functional-dependencies-and-keys)
        - R* = one of these forms $$\rightarrow$$ R* is guaranteed to achieve certain good properties
            - e.g., if R* is in Boyce-Codd NF, it is guaranteed to not have certain types of redundancy
    - Algorithms to transform R into R* that is in some of these normal forms
    - Trade-offs among normal forms
- Our job:
    - learn these forms
    - transform R into R* in one of these forms
    - carefully evaluate the trade-offs

## Functional Dependencies and Keys ì§ê´€
- A form of constraint (hence, part of the schema)
- Finding them is part of the database design
- Used heavily in schema refinement

$$A_1,A_2,...,A_n\ \rightarrow\ B_1,B_2,...,B_n$$

- If two tuples agree on the attributes $$A_1,A_2,...,A_n$$, then they must also agree on the attributes $$B_1,B_2,...,B_n$$

![image](https://user-images.githubusercontent.com/39285147/207596349-34ea8092-560a-49d7-978f-2010905431e6.png)

$$EmpID\ \rightarrow Name,\ Phone,\ Position$$

$$Position\ \rightarrow\ Phone$$

$$Phone\ \nrightarrow\ Position$$

í•˜ì§€ë§Œ, Phone `1234`ëŠ” Positionì—ì„œ `Clerk`ê³¼ `Lawyer` ë‘ ê°€ì§€ íŠœí”Œì„ ê°€ì§€ê¸° ë•Œë¬¸ì—  dependencyê°€ ì„±ë¦½í•˜ì§€ ì•ŠëŠ” ëª¨ìŠµì´ë‹¤.

### Functional Dependency ì¦ëª…
[$$A \rightarrow B$$]

![image](https://user-images.githubusercontent.com/39285147/207597120-d5b18850-9c58-4fa1-9139-37c2055384a8.png)

1. Erase all other columns
2. Check if $$A\ \Leftrightarrow \ B$$ many-one (called **functional** in mathematics)



****
# Reference 
[Database Management Systems by Raghu Ramakrishnan and Johannes Gehrke](https://pages.cs.wisc.edu/~dbbook/)