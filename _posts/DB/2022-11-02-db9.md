---
layout: single
title: "DBMS: Relational Algebra"
categories: DB
tag: [Database, Relational Algebra]
toc: true
toc_sticky: true
toc_label: "ì­ŒìŠ¤log"
#author_profile: false
header:
    teaser: /assets/images/posts/db.png
sidebar:
    nav: "docs"
---

# INTRO ğŸ™Œ
ì €ë²ˆ ì‹œê°„ì—ëŠ” Relational Algebra Operations ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ë‹¤.

ì´ë²ˆ ì‹œê°„ì—ëŠ” ìƒê¸° ê³¼ì •ì´ **Relational Algebra**ê°€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ì.

****
# RA
- ë‹¤ì„¯ ê°œì˜ ê¸°ë³¸ ì—°ì‚°ì; ê¸°ë³¸ ì—°ì‚°ìë¡œë¶€í„° íŒŒìƒë¬¼ å¤š
- ì¿¼ë¦¬ ìƒì„±ì„ ìœ„í•´ ì—°ì‚°ì ì¡°í•©
    - **RA expressions**, ì£¼ë¡œ íŠ¸ë¦¬ í˜•íƒœ

## Complex Expressions (ë³µì¡í•œ í‘œí˜„ì‹)
- RAëŠ” ëŒ€ìˆ˜í•™ê³¼ ë¹„ìŠ·í•˜ê²Œ ë™ì‘
    - ê°€ë ¹ $(x + 4)*(y - 3)$
- 3ê°€ì§€ notations (just as in arithmetic):
    - 1. Sequences of assignment statements
    - 2. Expressions with several operators
    - 3. Expression trees

### 1) Sequences of Assignment
$R3\ :=\ R1\ JOINC\ R2$

$R4\ :=\ R1 * R2$

$R3\ :=\ SELECTC\ (R4)$

- ì„ì‹œ relation ì´ë¦„ ìƒì„±
- Renaming can be implied by giving relations a list of attributes

### 2) Expressions with Several Operators
$theta-join\ R3\ :=\ R1\ JOINC\ R2$

$R3\ :=\ SELECTC\ (R1 * R2)$

- ê´€ê³„ ì—°ì‚°ì(relational operators) ìš°ì„  ìˆœìœ„:
    1. Unary operators (i.e., select, project, rename)
    2. Products and joins
    3. Intersection
    4. Union and set difference

> ê´„í˜¸() ì‚¬ìš©í•˜ì—¬ í•­ìƒ ìš°ì„  ìˆœìœ„ë¥¼ ë³€ê²½ ê°€ëŠ¥

### 3) Expression Trees
- ê°€ì§€(Leaves) = operands
    - ê´€ê³„ ë³€ìˆ˜ (variables standing for relations)
    - íŠ¹ì • ê´€ê³„ (particular, constant relations)
- Interior nodes = operators
    - applied to their child or children.

### ì‘ìš©
***"Maple St." ì´ë¦„ì„ ê°€ì¡Œê±°ë‚˜ "Bud" ê°€ê²©ì´ \$3 ë³´ë‹¤ ì‘ì€ ëª¨ë“  bars ì´ë¦„ ê°€ì ¸ì˜¤ê¸°***

$Bars(name, addr)$

$Sells(bar, beer, price)$ 

![image](https://user-images.githubusercontent.com/39285147/201670239-1c4b8c51-a671-4591-88c0-899c992773b4.png)

***ì„œë¡œ ë‹¤ë¥¸ ë‘ ê°œì˜ ë§¥ì£¼ë¥¼ ê°™ì€ ê°€ê²©ì— íŒŒëŠ” bars ê°€ì ¸ì˜¤ê¸°***

$Sells(bar, beer, price)$ 

![image](https://user-images.githubusercontent.com/39285147/201671137-ebac22e8-8d70-443c-89e7-0e8a6bfa7b6b.png)

**Renaming**ì„ í†µí•´ Sellsì˜ ë³µì‚¬ë³¸ $S(bar, beer1, price)$ì„ ì •ì˜í•˜ëŠ” ëª¨ìŠµì´ë‹¤.

ì´í›„, *Sells*ê³¼ *S*ì„ **Natural Join**ìœ¼ë¡œ ë¬¶ì–´, ì£¼ì–´ì§„ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” $quadruples(bar, beer, beer1, price)$ë¥¼ ìƒì„±í•œë‹¤.

## Complex Queries (ë³µì¡í•œ ì¿¼ë¦¬)
        Product ( pid, name,  price, category, maker-cid)
        Purchase (buyer-ssn,  seller-ssn,  store,  pid)
        Company (cid, name, stock price, country)
        Person(ssn, name, phone number, city)

- *Purchase*
    - buyer-ssn, seller-ssn: foreign keys in Person
    - pid: foreign key in Product; 
- *Product*
    - maker-cid: a foreign key in Company

í•˜ê¸° ì˜ˆì‹œë“¤ì„ í†µí•´ ì‘ìš© ì´í•´ë¥¼ ë„ëª¨í•˜ê¸°ë¥¼ ë°”ë€ë‹¤.

Ex #0: ***Find phone numbers of people who bought gizmos from Fred.***

> ![image](https://user-images.githubusercontent.com/39285147/201672020-92a15eec-b26c-46b3-8696-7d611790a9fe.png)

Ex #1: Find people who bought telephony products.

Ex #2: Find names of people who bought American products 

Ex #3: Find telephony products that somebody bought

Ex #4: Find names of people who bought American products and did not buy French products

Ex #5: Find names of people who bought American products and they live in Champaign.
 
Ex #6: Find people who bought stuff from Joe or bought products from a company whose stock prices is more than $50.

## Operations on Bags
- **Union**: $\{a,b,b,c\}\ U\ \{a,b,b,b,e,f,f\}\ =\ \{a,a,b,b,b,b,b,c,e,f,f\}$
    - add the number of occurrences
- **Difference**: $\{a,b,b,b,c,c\}\ â€“\ \{b,c,c,c,d\}\ =\ \{a,b,b,d\}$
    - subtract the number of occurrences
- **Intersection**: $\{a,b,b,b,c,c\}\ \cap\ \{b,b,c,c,c,c,d\}\ =\ \{b,b,c,c\}$
    - minimum of the two numbers of occurrences
- **Selection**: íŠ¹ì • ìš”ì†Œ ì„ íƒ; preserve the number of occurrences (ì¤‘ë³µ ì œê±°)
- **Projection**: íŠ¹ì • ìš”ì†Œ ì„ íƒ; preserve the number of occurrences (ì¤‘ë³µ í¬í•¨)
- **Cartesian product, join**: ì¤‘ë³µ ì œê±°; no duplicate elimination


****
# Reference 
[Database Management Systems by Raghu Ramakrishnan and Johannes Gehrke](https://pages.cs.wisc.edu/~dbbook/)

[Relational Operators](https://www.javatpoint.com/dbms-relational-algebra)